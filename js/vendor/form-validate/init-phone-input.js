const baseCountryCode="+7",baseMatrix=" (___) ___ __ __",phoneLength="+7".length+baseMatrix.length,onPhoneInputInput=e=>{const t=`+7${baseMatrix}`,n=t.replace(/\D/g,"");let o=0,a=e.target.value.replace(/\D/g,"");n.length>=a.length&&(a=n),e.target.value=t.replace(/./g,(e=>/[_\d]/.test(e)&&o<a.length?a.charAt(o++):o>=a.length?"":e))},onPhoneInputFocus=({target:e})=>{e.value||(e.value="+7"),e.addEventListener("input",onPhoneInputInput),e.addEventListener("blur",onPhoneInputBlur),e.addEventListener("keydown",onPhoneInputKeydown),e.addEventListener("paste",onPhoneInputPaste),e.addEventListener("click",onPhoneInputClick)},onPhoneInputClick=e=>{e.target.selectionStart<4&&(e.preventDefault(),e.target.setSelectionRange(3,3))},onPhoneInputPaste=e=>{e.target.setSelectionRange(0,0),e.target.selectionStart||setTimeout((()=>{e.target.value.startsWith("+7")||(e.target.value.startsWith("+8")?e.target.value=`+7 ${e.target.value.slice(3)}`:e.target.value="")}))},onPhoneInputKeydown=e=>{e.target.selectionStart<4&&(37===e.keyCode||13===e.keyCode)&&(e.preventDefault(),e.target.setSelectionRange(3,3))},onPhoneInputBlur=({target:e})=>{if("+7"===e.value){const t=e.closest('[data-validate-type="phone"]');if(e.value="",!t.hasAttribute("data-required")){t.classList.remove("is-valid"),t.classList.remove("is-invalid");const e=t.querySelector(".input-message");e&&e.remove()}t.classList.remove("not-empty"),e.removeEventListener("input",onPhoneInputInput),e.removeEventListener("blur",onPhoneInputBlur),e.removeEventListener("keydown",onPhoneInputKeydown),e.removeEventListener("paste",onPhoneInputPaste),e.removeEventListener("click",onPhoneInputClick)}};export const initPhoneInput=e=>{const t=e.querySelector("input");e.dataset.phoneLength=phoneLength,t.addEventListener("focus",onPhoneInputFocus)};